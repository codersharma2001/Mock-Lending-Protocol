# Mock Lending Protocol

The Mock Lending Protocol is a lending smart contract designed for Mock USDT ERC20 tokens, offering features for both lenders and borrowers. The protocol includes liquidity provision, borrowing with collateral, fixed interest rates, interest tracking, and admin controls.

## Key Components

1. **Liquidity Provision:**
   - Lenders provide Mock USDT liquidity tokens, earning interest.
   - Liquidity tokens serve as collateral for borrowers.

2. **Borrowing:**
   - Borrowers deposit approved collateral tokens to borrow Mock USDT.
   - Admin whitelists collateral tokens for borrower eligibility.

3. **Interest Rates:**
   - Fixed interest rates calculated per second.
   - Rates set as a constant variable, ranging from 1% to 10% per year.

4. **Interest Tracking:**
   - Tracks liquidity provided by lenders.
   - Monitors interest generated by borrowed Mock USDT for each lender.

5. **Withdrawal by Lenders:**
   - Lenders can claim interest in Mock USDT.
   - Liquidity tokens withdrawal when sufficient reserves available.

6. **Withdrawal Restrictions for Borrowers:**
   - Restrictions if borrower's interest >= borrowed amount.
   - Avoids liquidation complexities due to assumed price stability.

7. **Borrower Options:**
   - Borrowers choose to pay interest or interest + withdraw collateral.

8. **Admin Controls:**
   - Admin role whitelists valid collateral tokens.
   - Ensures control over accepted collateral types.

## Assumptions and Simplifications

- Liquidation and volatility complexities are avoided for simplicity.
- Assumes price stability to simplify protocol operations.

## Usage of Project

### Build the project 

```shell
$ forge build
```

### Testing the smart contracts

```shell
$ forge test
```

### Format

```shell
$ forge fmt
```

### Gas Snapshots

```shell
$ forge snapshot
```

### Anvil

```shell
$ anvil
```

### Deploy the smart contract on testnet or mainnet

```shell

$ forge script script/Mock_Lending_Protocol.s.sol --rpc-url <your_rpc_url> --private-key <your_private_key>

```
### Using the `--broadcast` flag , we can see the details of the transaction on the console

```shell

$ forge script script/Mock_Lending_Protocol.s.sol --rpc-url <your_rpc_url> --private-key <your_private_key> --broadcast

```

### You can view the transaction on Block Explorer on Sepolia 

Deploying contract: Mock_Lending_Protocol 
- smart contract address : 0x942D204dD15a2aAF86b7f17a8f32Db1F35D308e0
- block explorer url : https://sepolia.etherscan.io/tx/0x4119c52c915db0c44a1df91bf39cf8e70f45466309dc08d86678c929fbe60f2e

Deploying contract: MockUSDT
- smart contract address : 0xAF9F8aC7EAED1fb3559535c1A0A319F9109a3a2e
- block explorer url : https://sepolia.etherscan.io/tx/0x6ed91ff72bf6b994d7375bdfc2d8600785a303e566564a36abcabe9e24955a80

### Cast

```shell
$ cast <subcommand>
```

### Help

```shell
$ forge --help
$ anvil --help
$ cast --help
```
